- name: Remove elasticsearch container nodes
  docker_container:
    name: "{{ item.hostname }}"
    state: absent
  loop: "{{ elasticsearch_nodes }}"

- name: Remove elasticsearch node volume
  docker_volume:
    name: "{{ item.volume_name }}"
    state: absent
  loop: "{{ elasticsearch_nodes }}"
  when: ('elasticsearch-volume' in ansible_run_tags)

- name: Remove elasticsearch node data dir
  file:
    path: "{{ item.data_dir }}"
    state: absent
  loop: "{{ elasticsearch_nodes }}"
  when: ('elasticsearch-data-dir' in ansible_run_tags)
