- name: Include package tasks
  include_tasks: package-apt.yml
  when: packages is defined
  tags:
   - package

- name: Include package apt tasks
  include_tasks: package-apt.yml
  when: packages is defined and ansible_distribution == 'Ubuntu'
  tags:
   - package

- name: Include package yum tasks
  include_tasks: package-yum.yml
  when: packages is defined and ansible_distribution == 'CentOS' and ansible_python_interpreter == '/usr/bin/python2'
  tags:
   - package

- name: Include package dnf tasks
  include_tasks: package-dnf.yml
  when: packages is defined and ansible_distribution == 'CentOS' and ansible_python_interpreter == '/usr/bin/python3'
  tags:
   - package