- name: "Create or update Keycloak client"
  keycloak_client:
    auth_client_id: "{{ item.auth_client_id | default('admin-cli') }}"
    auth_keycloak_url: "{{ item.auth_keycloak_url }}"
    auth_realm: "{{ item.auth_realm | default('master') }}"
    auth_username: "{{ item.auth_username }}"
    auth_password: "{{ item.auth_password }}"
    state: "{{ item.state | default('present') }}"
    realm: "{{ item.realm }}"
    client_id: "{{ item.client_id }}"
    name: "{{ item.name }}"
    description: "{{ item.description }}"
    enabled: "{{ item.enabled  | default(True) }}"
    protocol: "{{ item.protocol  | default('openid-connect') }}"
    client_authenticator_type: "{{ item.client_authenticator_type  | default('client-secret') }}"
    standard_flow_enabled: "{{ item.standard_flow_enabled | default(True) }}"
    implicit_flow_enabled: "{{ item.implicit_flow_enabled | default(False) }}"
    direct_access_grants_enabled: "{{ item.direct_access_grants_enabled | default(False) }}"
    root_url: "{{ item.root_url }}"
    redirect_uris: "{{ item.redirect_uris }}"
    base_url: "{{ item.base_url }}"
    full_scope_allowed: "{{ item.full_scope_allowed  | default(False) }}"
  loop: "{{ keycloak_clients }}"
